<div class="clearfix mt-5">
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 custompadding">
        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8 col-xl-8 p-0">
            <span><button type="button" class="btn btn-sm btn-outline-secondary font-10"  title="Add New"  data-ng-click="ServiceCtrl.ePage.Masters.AddNewRow()" ng-disabled="ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable"><span class="fa fa-plus"></span>&nbsp;&nbsp;Add New</button></span>
            <span><button type="button" class="btn btn-sm btn-outline-primary font-10"  title="Copy"  data-ng-click="ServiceCtrl.ePage.Masters.CopyRow()" ng-disabled="!ServiceCtrl.ePage.Masters.EnableDeleteButton || ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable"><span class="fa fa-copy"></span>&nbsp;&nbsp;Copy</button></span>
            <span><button type="button" class="btn btn-sm btn-outline-primary font-10"  title="Delete"  data-ng-click="ServiceCtrl.ePage.Masters.RemoveRow()" ng-disabled="!ServiceCtrl.ePage.Masters.EnableDeleteButton || ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable"><span class="fa fa-trash"></span>&nbsp;&nbsp;Delete</button></span>
            <span><button type="button" class="btn btn-sm btn-outline-primary font-10"  title="Customize"  data-ng-click="ServiceCtrl.ePage.Masters.EditTableColumns = true"><span class="fa fa-filter"></span>&nbsp;&nbsp;Customize</button></span>
        </div>
        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xl-4 p-0">
            <div class="input-group">
                <div class="input-group-addon font-10"><i class="fa fa-search font-10"></i></div>
                <input type="text" class="form-control height-25 font-10" placeholder="Search" ng-model="ServiceCtrl.ePage.Masters.SearchTable">
            </div>      
        </div>
    </div>
    <div id="SerTable{{ServiceCtrl.ePage.Entities.Header.Data.PK}}" class="fixedheader mb-0" key-events table-object='ServiceCtrl.ePage.Entities.Header.Data.UIJobServices' enable='ServiceCtrl.ePage.Masters.Enable' selected-row='ServiceCtrl.ePage.Masters.selectedRow' unique-id='SerTable{{ServiceCtrl.ePage.Entities.Header.Data.PK}}'>
        <table id = "ServiceCtrl.ePage.Masters.AddScroll" style="height: 170px">
            <thead>
                <tr id="tableHeader">
                    <th id="servicecheckbox" data-ng-if="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicecheckbox.isenabled"  ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicecheckbox.width + 'px' }">
                        <label class="customcheckbox">
                            <input type="checkbox" ng-change="ServiceCtrl.ePage.Masters.SelectAllCheckBox()" ng-checked="ServiceCtrl.ePage.Masters.SelectAll"
                                ng-model="ServiceCtrl.ePage.Masters.SelectAll" ng-disabled="ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable">
                            <span class="text"></span>
                        </label>
                    </th>
                    <th id="servicesno" data-ng-if="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicesno.isenabled" ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicesno.width + 'px' }" title="S.No">S.No</th>
                    <th id="servicetype" data-ng-if="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicetype.isenabled" ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicetype.width + 'px' }" title="Type">Type</th>
                    <th id="datebooked"data-ng-if="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.datebooked.isenabled" ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.datebooked.width + 'px' }" title="Date Booked">Date Booked</th>
                    <th id="completeddate" data-ng-if="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.completeddate.isenabled" ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.completeddate.width + 'px' }" title="Completed Date">Completed Date</th>
                    <th id="contractor" data-ng-if="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.contractor.isenabled" ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.contractor.width + 'px' }" title="Contractor">Contractor</th>
                    <th id="count"data-ng-if="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.count.isenabled" ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.count.width + 'px' }" title="Count">Count</th>
                    <th id="servicelocation" data-ng-if="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicelocation.isenabled" ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicelocation.width + 'px' }" title="Service Location">Service Location</th>
                </tr>
            </thead>
            <tbody id="SerCustTable{{ServiceCtrl.ePage.Entities.Header.Data.PK}}">
                <tr id="tableBody" ng-repeat="x in ServiceCtrl.ePage.Entities.Header.Data.UIJobServices | filter:ServiceCtrl.ePage.Masters.SearchTable"  ng-click="ServiceCtrl.ePage.Masters.setSelectedRow($index);" ng-class="{row_active: (ServiceCtrl.ePage.Masters.selectedRow==$index),copy_row_active :(x.IsCopied==true)}" 
                    watch-table table-properties="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices"  unique-id="SerCustTable{{ServiceCtrl.ePage.Entities.Header.Data.PK}}" row-position="$index">
                    <td id="servicecheckbox" data-ng-show='ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicecheckbox.isenabled' ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicecheckbox.width + 'px' ,'padding-top':'0px' }" ng-click="ServiceCtrl.ePage.Masters.Enable = true">
                        <label class="mb-0 customcheckbox">
                            <input type="checkbox" ng-checked="x.SingleSelect" ng-change="ServiceCtrl.ePage.Masters.SingleSelectCheckBox()"
                                ng-model="x.SingleSelect" ng-disabled="ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable"> </input>
                            <span class="text"></span>
                        </label>
                        <span class="list-error-warning" data-ng-if="ServiceCtrl.ePage.Entities.Header.Meta.ErrorWarning.UIJobServices.ERROR | listCount: 'RowIndex': $index">
                            <error-warning-directive 
                                list="ServiceCtrl.ePage.Entities.Header.Meta.ErrorWarning.UIJobServices.ERROR"
                                type="'error'" icon="fa fa-warning" parent-type="'arrayObjectRow'" parent-ref=""
                                g-parent-ref="" row-index="$index"
                                col-index="">
                            </error-warning-directive>
                        </span>
                    </td>
                    <td id="servicesno"   data-ng-show='ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicesno.isenabled' ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicesno.width + 'px' }" ng-click="ServiceCtrl.ePage.Masters.Enable = true">
                        {{$index+1}}
                    </td>
                    <td id="servicetype"  data-ng-show='ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicetype.isenabled'  ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicetype.width + 'px' }">
                        <div data-ng-if="$index!=ServiceCtrl.ePage.Masters.selectedRow || ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable" class="overflow-text">
                            {{ x.ServiceCode || ServiceCtrl.ePage.Masters.emptyText}}
                        </div>
                        <div data-ng-if="$index==ServiceCtrl.ePage.Masters.selectedRow && !ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable">
                            <div class="height-22 col-xs-10 col-sm-10 col-md-10 col-lg-10 col-xl-10 p-0" ng-click="ServiceCtrl.ePage.Masters.Enable = false">
                                <select chosen class="form-control" ng-model="x.ServiceCode" ng-options="x.Key as x.Value for x in ServiceCtrl.ePage.Masters.DropDownMasterList.WOR_SERVICECODE.ListSource"search-contains="true" ng-change="ServiceCtrl.ePage.Masters.OnChangeValues(x.ServiceCode,'E3017',true,$index)">
                                   <option value="">--Select--</option>
                               </select>              
                            </div>
                            <div class="list-error-warning col-xs-2 col-sm-2 col-md-2 col-lg-2 col-xl-2 p-0 pl-5" data-ng-if="ServiceCtrl.ePage.Entities.Header.Meta.ErrorWarning.UIJobServices.ERROR | filter:{RowIndex:$index} | listCount: 'ColIndex':1">
                                <error-warning-directive  list="ServiceCtrl.ePage.Entities.Header.Meta.ErrorWarning.UIJobServices.ERROR"
                                    type="'error'" icon="fa fa-warning" parent-type="'arrayObjectCol'" parent-ref="" g-parent-ref=""
                                    row-index="ServiceCtrl.ePage.Masters.selectedRow" col-index="1">
                                </error-warning-directive>
                            </div>
                        </div>
                    </td>
                    <td id="datebooked"   data-ng-show='ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.datebooked.isenabled' ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.datebooked.width + 'px' }" ng-click="ServiceCtrl.ePage.Masters.Enable = true">
                        <div data-ng-if="$index!=ServiceCtrl.ePage.Masters.selectedRow || ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable" class="overflow-text">
                            {{ x.Booked || ServiceCtrl.ePage.Masters.emptyText | dateFormat}}
                        </div>
                        <div data-ng-if="$index==ServiceCtrl.ePage.Masters.selectedRow && !ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-10 p-0">
                                <div class="input-group input-group-sm">
                                    <input type="text" class="form-control height-22" placeholder="{{ServiceCtrl.ePage.Masters.DatePicker.Options.dateFormat}}" datetime-picker="{{ServiceCtrl.ePage.Masters.DatePicker.Options.dateFormat}}"
                                        ng-model="x.Booked" is-open="ServiceCtrl.ePage.Masters.DatePicker.isOpen['isBooked'+[$index]]"
                                        datepicker-options="ServiceCtrl.ePage.Masters.DatePicker.Options" datepicker-append-to-body="false"
                                        close-on-selection="false" enable-time="false" enable-date="true" default-date="" default-time="" when-closed=""
                                        save-as="ServiceCtrl.ePage.Masters.DatePicker.Options.saveFormat" data-ng-click=""
                                        data-ng-change="" custom-date-time-format/>
                                    <span class="input-group-btn height-22">
                                        <button type="button" class="btn btn-default" data-ng-click="ServiceCtrl.ePage.Masters.DatePicker.OpenDatePicker($event, 'isBooked'+[$index])">
                                            <i class="fa fa-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td id="completeddate"   data-ng-show='ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.completeddate.isenabled' ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.completeddate.width + 'px' }" ng-click="ServiceCtrl.ePage.Masters.Enable = true">
                        <div data-ng-if="$index!=ServiceCtrl.ePage.Masters.selectedRow || ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable" class="overflow-text">
                            {{ x.Completed || ServiceCtrl.ePage.Masters.emptyText | dateFormat}}
                        </div>
                        <div data-ng-if="$index==ServiceCtrl.ePage.Masters.selectedRow && !ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-10 p-0">
                                <div class="input-group input-group-sm">
                                    <input type="text" class="form-control height-22" placeholder="{{ServiceCtrl.ePage.Masters.DatePicker.Options.dateFormat}}" datetime-picker="{{ServiceCtrl.ePage.Masters.DatePicker.Options.dateFormat}}"
                                        ng-model="x.Completed" is-open="ServiceCtrl.ePage.Masters.DatePicker.isOpen['isCompleted']"
                                        datepicker-options="ServiceCtrl.ePage.Masters.DatePicker.Options" datepicker-append-to-body="false"
                                        close-on-selection="false" enable-time="false" enable-date="true" default-date="" default-time="" when-closed=""
                                        save-as="ServiceCtrl.ePage.Masters.DatePicker.Options.saveFormat" data-ng-click=""
                                        data-ng-change="" custom-date-time-format/>
                                    <span class="input-group-btn height-22">
                                        <button type="button" class="btn btn-default" data-ng-click="ServiceCtrl.ePage.Masters.DatePicker.OpenDatePicker($event, 'isCompleted')">
                                            <i class="fa fa-calendar"></i>
                                        </button>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td id="contractor"   data-ng-show='ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.contractor.isenabled' ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.contractor.width + 'px' }" ng-click="ServiceCtrl.ePage.Masters.Enable = true">
                        <div data-ng-if="$index!=ServiceCtrl.ePage.Masters.selectedRow || ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable" class="overflow-text">
                            {{ x.ORG_Contractor_Code || ServiceCtrl.ePage.Masters.emptyText}}
                        </div>
                        <div data-ng-if="$index==ServiceCtrl.ePage.Masters.selectedRow && !ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-10 p-0">
                                <div  class="input-group input-group-sm height-22">
                                     <!-- Dynamic look up Search in textbox -->
                                    <div dynamic-lookup placeholder="Contractor" my-ng-model="x.ORG_Contractor_Code"
                                        obj="x" page-name="'OrgHeader'" control-id="'Contractor'" control-key="'Contractor_3129'">
                                    </div>

                                    <!-- Look Up page opens when button clicks -->
                                    <span class="input-group-btn">
                                        <button dynamic-list-modal obj="x" control-id="'Contractor'" control-key="'Contractor_3129'"  page-name="'OrgHeader'" mode ="2" grid-refresh-fun-name="" grid-refresh-fun=""  class="btn btn-default shiny" type="button"><i class="fa fa-ellipsis-h"></i></button>
                                    </span>  
                                </div>                                       
                            </div>
                        </div>
                    </td>
                    <td id="count"   data-ng-show='ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.count.isenabled' ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.count.width + 'px' }" ng-click="ServiceCtrl.ePage.Masters.Enable = true">
                        <div data-ng-if="$index!=ServiceCtrl.ePage.Masters.selectedRow || ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable" class="overflow-text">
                            {{ x.ServiceCount || ServiceCtrl.ePage.Masters.emptyText}}
                        </div>
                        <div data-ng-if="$index==ServiceCtrl.ePage.Masters.selectedRow && !ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable">
                            <div class=" col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-10 p-0">
                                <input type="text" numbers-only-dot maxlength="5"  class="height-22 form-control input-sm ng-pristine ng-valid ng-not-empty ng-touched" placeholder="Item Count"  data-ng-model="x.ServiceCount">                                       
                            </div>
                        </div>
                    </td>
                    <td id="servicelocation"   data-ng-show='ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicelocation.isenabled' ng-style="{ 'width': ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices.servicelocation.width + 'px' }" ng-click="ServiceCtrl.ePage.Masters.Enable = true">
                        <div data-ng-if="$index!=ServiceCtrl.ePage.Masters.selectedRow || ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable" class="overflow-text">
                            {{ x.ORG_Location_Code || ServiceCtrl.ePage.Masters.emptyText}}
                        </div>
                        <div data-ng-if="$index==ServiceCtrl.ePage.Masters.selectedRow && !ServiceCtrl.ePage.Entities.Header.GlobalVariables.NonEditable">
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-10 p-0">
                                <div  class="input-group input-group-sm height-22">
                                        <!-- Dynamic look up Search in textbox -->
                                    <div dynamic-lookup placeholder="Service Location" my-ng-model="x.ORG_Location_Code"
                                        obj="x" page-name="'WarehouseLocation'" control-id="'Location'" control-key="'Location_2948'">
                                    </div>
        
                                    <!-- Look Up page opens when button clicks -->
                                    <span class="input-group-btn">
                                        <button dynamic-list-modal obj="x" control-id="'Location'" control-key="'Location_2948'"   page-name="'WarehouseLocation'" mode ="2" grid-refresh-fun-name="" grid-refresh-fun=""  class="btn btn-default shiny" type="button"><i class="fa fa-ellipsis-h"></i></button>
                                    </span>  
                                </div>                                       
                            </div>
                        </div>
                    </td>         
                </tr>
            </tbody>
        </table>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12 norecordfound"  ng-if="ServiceCtrl.ePage.Entities.Header.Data.UIJobServices.length==0">No Record Found...</div>
</div>
<!-- To show Customize Modal -->
<div ng-if='ServiceCtrl.ePage.Masters.EditTableColumns'>
    <customize-table table-properties="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices" enable="ServiceCtrl.ePage.Masters.EditTableColumns" unique-id="SerCustTable{{ServiceCtrl.ePage.Entities.Header.Data.PK}}" user-value='ServiceCtrl.ePage.Masters.UserValue' entity-source='WMS_SERVICES'></customize-table>
</div>
 <!-- Call Directive If user has value -->
<div ng-if='ServiceCtrl.ePage.Masters.UserHasValue' ng-init="ServiceCtrl.ePage.Masters.UserHasValue=false">
    <watch-table table-properties="ServiceCtrl.ePage.Entities.Header.TableProperties.UIJobServices"  unique-id="SerCustTable{{ServiceCtrl.ePage.Entities.Header.Data.PK}}"></watch-table>
</div>